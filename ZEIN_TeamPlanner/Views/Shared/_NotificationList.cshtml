@model IEnumerable<ZEIN_TeamPlanner.Models.Notification>

@if (!Model.Any())
{
    <div class="dropdown-item text-center">No notifications</div>
}
else
{
    @foreach (var notification in Model)
    {
        <div class="notification-item @(notification.IsRead ? "" : "unread")">
            <a href="@GetNotificationLink(notification)" class="text-decoration-none">
                <small>@notification.CreatedAt.ToString("dd MMM yyyy HH:mm")</small>
                <p class="mb-0">@notification.Message</p>
            </a>
        </div>
    }
}

@functions {
    string GetNotificationLink(Notification notification)
    {
        if (notification.RelatedEntityType == "TaskItem")
            return Url.Action("Details", "TaskItems", new { id = notification.RelatedEntityId });
        if (notification.RelatedEntityType == "CalendarEvent")
            return Url.Action("Details", "CalendarEvents", new { id = notification.RelatedEntityId });
        if (notification.RelatedEntityType == "GroupInvite")
            return Url.Action("Details", "Groups", new { id = notification.RelatedEntityId });
        return "#";
    }
}